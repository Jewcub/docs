<h1><i class="fas fa-asterisk" style="color:#ff1c3f"></i> Textile <small>cafe</small></h1>

#### Cafe Mode

If you are using Textile to develop an application, you may want to run your Textile daemon in _Cafe mode_. This means the node will be open for your app to relay messages to other users when they are offline, cache larger files (e.g. encrypted images) for the network, and help with the p2p discovery in general.

To run your node in cafe mode you need to edit the config found at `.textile/repo/textile`, or use the built-in `config` (see [[Config|Config-File]]) commands, or specify custom Cafe options on node init (see `textile init --help` and/or the [[Daemon|Daemon]] wiki entry). If you've already installed `textile-go` and used the default settings, your config file will be in your `HOME` directory. You'll need to edit the `Cafe` entry (see also the [[Cafe section of the Config wiki|Config-File#cafe]]). You'll just change the field `"Open": false` to `"Open": true`, restart your daemon and you are off to the races!

#### Cafe Setup

More advanced Cafe settings and setup allows developers to fine-tune how their Cafe interacts with Textile peers, what services they provide, how those services are accessed (and where), and even setup access control and other tweaks. Textile uses several 'default' settings for our Cafes, whose setup scripts are available from our [`textile-opts` GitHub repository](https://github.com/textileio/textile-opts). For example, Textile Cafes are all run using the _server_ IPFS profile, with their Cafe APIs bound to `0.0.0.0:40601`, their Gateway address bound to `0.0.0.0:5050`, and swarming on port `4001`. We also use a `systemctl` service to keep the peers running on reboot. For actual Cafe instances, Textile uses a series of Amazon EC2 instances, each behind its own load balancer to facilitate SSL certificate setup and handling. Additionally, all of Textile's Cafes decrypting gateways are tied together via a different load balancer to provide a 'logically centralized' access point for Gateway services. This setup is by no means required, and while your particular use cases may differ, we provide this information for those looking to setup their own Cafe arrangement in a 'production' environment.

#### Cafe Client Setup

It is relatively easy to control how your local peer interacts with a Cafe from the command-line tools provided with Textile. Using the `textile cafes` sub-command, a client can add, list, get, remove cafes and check for any offline messages (see the `textile cafes --help` command for details). To add a new Cafe (you can add multiple Cafes and your content will be duplicated across each one), you can use the `textile cafes add` command. This will register your local peer with the given Cafe peer, and saves an expiring service session token. An access token is required for initial registeration, and should be obtained separately from the target Cafe. The command to add a new Cafe looks something like this: `textile cafes add --token=blahblahblahblahblahnlahblah https://textile.cafe` where the `token` argument is a token, as generated by the `textile tokens create` command (again, you'll have to obtain this from a Cafe administrator) and the URL is the public address of the running Cafe (see [[Cafe Setup|Cafes#Setup]] for details).

Once you have registered with a given set of Cafes, you can list them `textile cafes ls`, get information on a particular Cafe (`textile cafes get`), and even remove them from your list (`textile cafes rm`). Additionally, you can check for offline messages using `textile cafes messages`. This will request updates from the Cafe, which you can then explore with the `textile messages` sub-command (see `textile messages --help` and/or the [Messages](/learn#messages) wiki entry for details).